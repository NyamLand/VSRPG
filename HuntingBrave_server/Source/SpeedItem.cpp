
#include	"iextreme.h"
#include	"GlobalFunction.h"
#include	"GameParam.h"
#include	"LevelManager.h"
#include	"SpeedItem.h"

//**************************************************************************
//
//	SpeedItemクラス
//
//**************************************************************************

//----------------------------------------------------------------------------------------------
//	グローバル
//----------------------------------------------------------------------------------------------

#define	EFFECTIVE_TIME		10.0f
#define	DOUBLE_PARAM		1.5f

//----------------------------------------------------------------------------------------------
//	初期化・解放
//----------------------------------------------------------------------------------------------

	//	コンストラクタ
	SpeedItem::SpeedItem( int id ) : Item( id )
	{
	
	}

	//	デストラクタ
	SpeedItem::~SpeedItem( void )
	{

	}

//----------------------------------------------------------------------------------------------
//	更新
//----------------------------------------------------------------------------------------------

	//	更新
	void	SpeedItem::Update( void )
	{
		if ( timer->Update() )
		{
			//	無効中処理
			if ( state )
			{
				//	有効中処理
				gameParam->GetPlayerStatus( id ).speed =
					gameParam->GetPlayerStatus( id ).saveSpeed;

				//	ステータスを無効
				state = false;
			}
		}
		else
		{
			//	有効中処理
			gameParam->GetPlayerStatus( id ).speed =
				gameParam->GetPlayerStatus( id ).saveSpeed * DOUBLE_PARAM;
		}

		//	送信
		levelManager->SendStatus( id, SEND_STATUS::SPEED, gameParam->GetPlayerStatus( id ).speed );
	}

//----------------------------------------------------------------------------------------------
//	動作関数
//----------------------------------------------------------------------------------------------

	//	アイテム使用
	void	SpeedItem::UseItem( void )
	{
		timer->Start( EFFECTIVE_TIME );
		state = true;
	}

//----------------------------------------------------------------------------------------------
//	
//----------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------
//	グローバル
//----------------------------------------------------------------------------------------------

