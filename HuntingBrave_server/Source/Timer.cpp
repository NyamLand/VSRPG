
#include	"iextreme.h"
#include	"Timer.h"

//*****************************************************************************************************************************
//
//		ゲームデータ管理
//
//*****************************************************************************************************************************

//----------------------------------------------------------------------------------------------
//	グローバル
//----------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------
//	初期化・解放
//----------------------------------------------------------------------------------------------

	//	コンストラクタ
	Timer::Timer( void ) : startTime( 0 ), endTime( 0 ), nowTime( 0 )
	{
		
	}

	//	デストラクタ
	Timer::~Timer( void )
	{

	}

	//	初期化
	void	Timer::Initialize( void )
	{
		startTime = 0;
		endTime = 0;
		nowTime = 0;
	}

//----------------------------------------------------------------------------------------------
//	更新
//----------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------
//	動作関数
//----------------------------------------------------------------------------------------------

	//	タイマースタート
	void	Timer::Start( int limit )
	{
		//	スタート時の時間を格納
		time( &startTime );
		
		//	終了時間を設定
		endTime = startTime + limit;
	}

	//	制限時間更新( 指定した時間をすぎるとtrueをかえす )
	bool	Timer::Update( void )
	{
		//	値が０ならスキップ
		if ( startTime == 0 || endTime == 0 )	return	false;

		//	現在の時間を格納
		time( &nowTime );
		
		//	時間計算
		if ( endTime - nowTime <= 0 )		return	true;
		return	false;
	}

//----------------------------------------------------------------------------------------------
//	情報設定
//----------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------
//	情報取得
//----------------------------------------------------------------------------------------------

	//	現在の残り時間を取得
	int		Timer::GetLimitTime( void )const
	{
		int remainingTime = ( int )( endTime - nowTime );
		if ( remainingTime <= 0 )	return 0;
		else return	remainingTime;
	}