
#include	"iextreme.h"
#include	"GlobalFunction.h"
#include	"WaitLoad.h"

//**************************************************************************
//
//	WaitLoadクラス
//
//**************************************************************************

//--------------------------------------------------------------------------------------------
//	グローバル
//--------------------------------------------------------------------------------------------

#define	COUNT_MAX	3

//--------------------------------------------------------------------------------------------
//	初期化・解放
//--------------------------------------------------------------------------------------------

	//	コンストラクタ
	WaitLoad::WaitLoad( void ) : font( nullptr ), timer( nullptr ), back( nullptr ),
		count( 0 )
	{
		back = new iex2DObj( "DATA/UI/BackGround/loading.png" );
		font = new Font( "HG行書体", 30 );
		timer = new Timer();
		sprintf_s( text, "NowLoading" );
		timer->Start( 0.5f );
	}

	//	デストラクタ
	WaitLoad::~WaitLoad( void )
	{
		SafeDelete( back );
		SafeDelete( font );
		SafeDelete( timer );
	}

//--------------------------------------------------------------------------------------------
//	更新・描画
//--------------------------------------------------------------------------------------------

	//	更新
	void	WaitLoad::Update( void )
	{
		if ( timer->Update() )
		{
			timer->Start( 0.5f );
			strcat( text, "." );

			if ( count == COUNT_MAX )
			{
				count = 0;
				sprintf_s( text, "NowLoading" );
			}
			else	count++;
		}
	}

	//	描画
	void	WaitLoad::Render( void )
	{
		back->Render( 0, 0, iexSystem::ScreenWidth, iexSystem::ScreenHeight, 0, 0, 1280, 720 );
		font->DrawFont( text, 1050, 650, 1280, 720, 0xFFFFFFFF );
	}

//--------------------------------------------------------------------------------------------
//	動作関数
//--------------------------------------------------------------------------------------------

//--------------------------------------------------------------------------------------------
//	
//--------------------------------------------------------------------------------------------


//--------------------------------------------------------------------------------------------
//	グローバル
//--------------------------------------------------------------------------------------------



